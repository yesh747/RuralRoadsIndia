# IND2012$SM19 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$SM19)))
# IND2012$SM20 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$SM20)))
# IND2012$SM21 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$SM21)))
#
#   # replace values less than 0 (survey error values) with 0, and replace NAs with 0
# IND2012[, SM2012begin: SM2012end] <- lapply(IND2012[, SM2012begin: SM2012end], function(x) replace(x, x %in% -7:-1, NA))
# IND2012[, SM2012begin: SM2012end] <- lapply(IND2012[, SM2012begin: SM2012end], function(x) replace(x, x %in% NA, 0))
# VilInd2012 <- aggregate(IND2012[, SM2012begin:SM2012end], by = list(IND2012$id), FUN = mean, na.rm = TRUE)
#
# # drop data not in 2005 survey
# VilInd2012[, c("SM16")] <- NULL
#
# VilInd2012 <- rename(VilInd2012, c("Group.1" = "id", "SM3" = "smDaysSick", "SM4" = "smFever", "SM5" = "smCough", "SM6" = "smCoughWithShortBreaths", "SM7" = "smDiarrhea", "SM8" = "smDiarrheaWithBlood", "SM9" = "smDiarrheaLiquidIntake", "SM10" = "smDiarrheaWithORS", "SM11" = "smDaysIncapacitated", "SM12" = "smTreatmentRecieved", "SM14A" = "smTreatmentWho1", "SM14B" = "smTreatmentWhere1", "SM15A" = "smTreatmentWho2", "SM15B" = "smTreatmentWhere2", "SM17" = "smDaysHospitalized", "SM18" = "smCostOfHospitalStay", "SM19" = "smCostIncludesMedication", "SM20" = "smCostOfMeds", "SM21" = "smTravelExpenses"))
# df2012 <- merge(df2012, VilInd2012, by="id")
#
# rm(SM2005begin, SM2005end, SM2012begin, SM2012end, VilInd2005, VilInd2012)
#
#   # Remove Repeat Data
#
# df2005 <- df2005[!duplicated(df2005$id),]
# df2012 <- df2012[!duplicated(df2012$id),]
# Average Individual Major Morbidity for each village
## 2005
MB2005begin <- which(colnames(IND2005) == "mb2")
MB2005DiseaseEnd <- which(colnames(IND2005) == "mb15")
MB2005end <- which(colnames(IND2005) == "mb25")
# replace values less than 0 (survey error values) with 0, and replace NAs with 0. Purpose to normalize data with 2012 data which uses 0, rather than NA as default.
IND2005[, MB2005begin: MB2005end] <- lapply(IND2005[, MB2005begin: MB2005end], function(x) replace(x, x %in% -7:-1, NA))
IND2005[, MB2005begin: MB2005end] <- lapply(IND2005[, MB2005begin: MB2005end], function(x) replace(x, x %in% NA, 0))
# Create new column that == 1 if a villager has any disease and 0 otherwise
for(i in MB2005begin:MB2005DiseaseEnd) {
IND2005$mbAnyDisease  <- ifelse(IND2005[, i] > 0, 1, 0)
}
VilInd2005 <- aggregate(IND2005[, c(MB2005begin:MB2005end)], by = list(IND2005$id), FUN = mean, na.rm = TRUE)
VilInd2005$mbAnyDiseaseTEMP <-aggregate(IND2005$mbAnyDisease, by = list(IND2005$id), FUN = mean, na.rm = TRUE)
VilInd2005$mbAnyDisease <- VilInd2005$mbAnyDiseaseTEMP$x
VilInd2005$mbAnyDiseaseTEMP <- NULL
VilInd2005 <- rename(VilInd2005, c("Group.1" = "id", "mb2" = "mbCataract", "mb3" = "mbTuberculosis", "mb4" = "mbHighBP", "mb5" = "mbHeartDisease", "mb6" = "mbDiabetes", "mb7" = "mbLeprosy", "mb8" = "mbCancer", "mb9" = "mbAsthma", "mb10" = "mbPolio", "mb11" = "mbParalysis","mb12"="mbEpilepsy" ,"mb13" = "mbMentalIllness", "mb14" = "mbSTDorAIDS", "mb15" = "mbOtherLongTerm", "mb16" = "mbDaysIncapacitated", "mb17" = "mbTreatmentRecieved", "mb19_1" = "mbTreatmentWho1", "mb20_1" = "mbTreatmentWhere1", "mb19_2" = "mbTreatmentWho2", "mb20_2" = "mbTreatmentWhere2", "mb21" = "mbDaysHospitalized", "mb22" = "mbCostOfTreatment", "mb23" = "mbCostIncludesMedication", "mb24" = "mbCostOfMeds", "mb25" = "mbTravelExpenses"))
df2005 <- merge(df2005, VilInd2005, by="id")
## 2012
MB2012begin <- which(colnames(IND2012) == "MB3")
MB2012DiseaseEnd <- which(colnames(IND2012) == "MB17")
MB2012end <- which(colnames(IND2012) == "MB28")
# convert weird strings of "(1) Yes 1" to numType of "1"
IND2012$MB3 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB3)))
IND2012$MB4 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB4)))
IND2012$MB5 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB5)))
IND2012$MB6 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB6)))
IND2012$MB7 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB7)))
IND2012$MB8 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB8)))
IND2012$MB9 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB9)))
IND2012$MB10 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB10)))
IND2012$MB11 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB11)))
IND2012$MB12 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB12)))
IND2012$MB13 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB13)))
IND2012$MB14 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB14)))
IND2012$MB15 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB15)))
IND2012$MB16 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB16)))
IND2012$MB17 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB17)))
IND2012$MB19 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB19)))
IND2012$MB21A <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB21A)))
IND2012$MB21B <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB21B)))
IND2012$MB22A <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB22A)))
IND2012$MB22B <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB22B)))
IND2012$MB23 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB23)))
IND2012$MB26 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$MB26)))
# replace values less than 0 (survey error values) with 0, and replace NAs with 0
IND2012[, MB2012begin: MB2012end] <- lapply(IND2012[, MB2012begin: MB2012end], function(x) replace(x, x %in% -7:-1, NA))
IND2012[, MB2012begin: MB2012end] <- lapply(IND2012[, MB2012begin: MB2012end], function(x) replace(x, x %in% NA, 0))
# Create new column that == 1 if a villager has any disease and 0 otherwise
for(i in MB2012begin:MB2012DiseaseEnd) {
IND2012$mbAnyDisease  <- ifelse(IND2012[, i] > 0, 1, 0)
}
VilInd2012 <- aggregate(IND2012[, MB2012begin:MB2012end], by = list(IND2012$id), FUN = mean, na.rm = TRUE)
VilInd2012$mbAnyDiseaseTEMP <-aggregate(IND2012$mbAnyDisease, by = list(IND2012$id), FUN = mean, na.rm = TRUE)
VilInd2012$mbAnyDisease <- VilInd2012$mbAnyDiseaseTEMP$x
VilInd2012$mbAnyDiseaseTEMP <- NULL
# drop data not in 2005 survey
VilInd2012[, c("MB16","MB23")] <- NULL
VilInd2012 <- rename(VilInd2012, c("Group.1" = "id", "MB3" = "mbCataract", "MB4" = "mbTuberculosis", "MB5" = "mbHighBP", "MB6" = "mbHeartDisease", "MB7" = "mbDiabetes", "MB8" = "mbLeprosy", "MB9" = "mbCancer", "MB10" = "mbAsthma", "MB11" = "mbPolio", "MB12" = "mbParalysis","MB13"="mbEpilepsy" ,"MB14" = "mbMentalIllness", "MB15" = "mbSTDorAIDS", "MB17" = "mbOtherLongTerm", "MB18" = "mbDaysIncapacitated", "MB19" = "mbTreatmentRecieved", "MB21A" = "mbTreatmentWho1", "MB21B" = "mbTreatmentWhere1", "MB22A" = "mbTreatmentWho2", "MB22B" = "mbTreatmentWhere2", "MB24" = "mbDaysHospitalized", "MB25" = "mbCostOfTreatment", "MB26" = "mbCostIncludesMedication", "MB27" = "mbCostOfMeds", "MB28" = "mbTravelExpenses"))
df2012 <- merge(df2012, VilInd2012, by="id")
rm(MB2005begin, MB2005DiseaseEnd, MB2005end, MB2012begin, MB2012end, MB2012DiseaseEnd, VilInd2005, VilInd2012, i)
# Remove Repeat Data
df2005 <- df2005[!duplicated(df2005$id),]
df2012 <- df2012[!duplicated(df2012$id),]
#2005
startDis <- which(colnames(df2005) == "mbCataract")
endDis <- which(colnames(df2005) == "mbOtherLongTerm")
df2005[, startDis:endDis] = df2005[, startDis:endDis]*100
df2005$mbAnyDisease = df2005$mbAnyDisease*100
df2005$mbCostIncludesMedication = df2005$mbCostIncludesMedication*100
#2012
startDis <- which(colnames(df2012) == "mbCataract")
endDis <- which(colnames(df2012) == "mbOtherLongTerm")
df2012[, startDis:endDis] = df2012[, startDis:endDis]*100
df2012$mbCostIncludesMedication = df2012$mbCostIncludesMedication*100
rm(startDis, endDis)
#2005 -------------------------------------------
# 1. Get range for tobacco and alcohol variables
TO2005begin <- which(colnames(IND2005) == "to2")
TO2005end <- which(colnames(IND2005) == "to4")
TO2012begin <- which(colnames(IND2012) == "TO4")
TO2012end <- which(colnames(IND2012) == "TO6")
## NOTE: using smoking bidis or hukkah for 2012 (TO4) but smoking cigarettes, bidis, or hukkah for 2005
# 2. Get range for school-attendance variables
SC2005begin <- which(colnames(IND2005) == "ta3")
SC2005end <- which(colnames(IND2005) == "ta4")
SC2012begin <- which(colnames(IND2012) == "TA3")
SC2012end <- which(colnames(IND2012) == "TA4")
# 3. Get range for literacy and math-score variables
LM2005begin <- which(colnames(IND2005) == "ta7lvl")
LM2005end <- which(colnames(IND2005) == "ta9lvl")
## NOTE: drop ta7lang, ta8lang, and ta9lang
LM2012begin <- which(colnames(IND2012) == "TA8B")
LM2012end <- which(colnames(IND2012) == "TA10B")
## NOTE: drop TA9A and TA10A
# 4. replace values less than 0 (survey error values) with NA.
IND2005[,c(TO2005begin:TO2005end, SC2005begin:SC2005end, LM2005begin:LM2005end)] <- lapply(IND2005[, c(TO2005begin:TO2005end, SC2005begin:SC2005end, LM2005begin:LM2005end)], function(x) replace(x, x %in% -7:-1, NA))
IND2012[,c(TO2012begin:TO2012end, SC2012begin:SC2012end, LM2012begin:LM2012end)] <- lapply(IND2012[, c(TO2012begin:TO2012end, SC2012begin:SC2012end, LM2012begin:LM2012end)], function(x) replace(x, x %in% -7:-1, NA))
# 4.1 Extract values from 2012 data cause of its dumb format
IND2012$TO4 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TO4)))
IND2012$TO5 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TO5)))
IND2012$TO6 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TO6)))
IND2012$TA3 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA3)))
IND2012$TA4 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA4)))
IND2012$TA8B <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA8B)))
IND2012$TA9B <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA9B)))
IND2012$TA10B <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA10B)))
IND2012$TA8A <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA8A)))
IND2012$TA9A <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA9A)))
IND2012$TA10A <- as.numeric(sub("\\).*", "", sub(".*\\(", "", IND2012$TA10A)))
# 5. Aggregate Data to Village Level
VilInd2005 <- aggregate(IND2005[ ,c(TO2005begin:TO2005end, SC2005begin:SC2005end, LM2005begin:LM2005end)], by=list(IND2005$id), FUN = mean, na.rm = TRUE)
VilInd2012 <- aggregate(IND2012[ ,c(TO2012begin:TO2012end, SC2012begin:SC2012end, LM2012begin:LM2012end)], by=list(IND2012$id), FUN = mean, na.rm = TRUE)
# 6. Drop irrelevant variables ta7lang, ta8lang, and ta9lang
VilInd2005[, c("ta7lang", "ta8lang", "ta9lang")] <- NULL
VilInd2012[, c("TA9A", "TA10A")] <- NULL
# 7. Rename variables
VilInd2005 <- rename(VilInd2005, c("Group.1" = "id", "to2"="smokeTobacco", "to3"="chewTobacco", "to4"="drinkAlcohol", "ta3"="attendedSchool", "ta4"="gradeCompleted", "ta7lvl"="readingScore", "ta8lvl"="mathScore", "ta9lvl"="writingScore"))
VilInd2012 <- rename(VilInd2012, c("Group.1" = "id", "TO4"="smokeTobacco", "TO5"="chewTobacco", "TO6"="drinkAlcohol", "TA3"="attendedSchool", "TA4"="gradeCompleted", "TA8B"="readingScore", "TA9B"="mathScore", "TA10B"="writingScore"))
# 8. Merge with df2005 and df2012
df2005 <- merge(df2005, VilInd2005, by="id")
df2012 <- merge(df2012, VilInd2012, by="id")
rm(TO2005begin, TO2005end, TO2012begin, TO2012end, SC2005begin, SC2005end, SC2012begin, SC2012end, LM2005begin, LM2005end, LM2012begin, LM2012end, VilInd2005, VilInd2012)
# 1. Decide which variables to add
## --------
# ## urban v rural -> factor binary
# HH2005$URBAN
# HH2012$URBAN2011
#
# ## total HH income -> Rs, ratio
# HH2005$INCOME
# HH2012$INCOME
#
# ## caste category -> factor
# HH2005$ID13
# HH2012$ID13
#
# ## years in place --> note 90 = forever
# HH2005$ID16
# HH2012$ID15
#
# ## toilet -> factor
# HH2005$SA4
# HH2012$SA4
#
# ## electricity -> factor binary
# HH2005$FU1
# HH2012$FU1
#
# ## electricity hours/day -> ratio
# HH2005$FU1A
# HH2012$FU1A
#
# ## drinking water source --> factor
# HH2005$WA1
# HH2012$WA1A
## --------
HH2005Controls <- c("URBAN", "INCOME", "ID13", "ID16","SA4", "FU1", "FU1A", "WA1")
HH2012Controls <- c("URBAN2011", "INCOME", "ID13", "ID15", "SA4", "FU1", "FU1A", "WA1A")
# 2. replace values less than 0 (survey error values) with NA.
HH2005[,HH2005Controls] <- lapply(HH2005[, HH2005Controls], function(x) replace(x, x %in% -7:-1, NA))
HH2012[,HH2012Controls] <- lapply(HH2012[, HH2012Controls], function(x) replace(x, x %in% -7:-1, NA))
#convert owning toilet from categorical to binary
HH2005$SA4 <- ifelse(HH2005$SA4 > 0, 1, 0)
HH2012$SA4 <- ifelse(HH2012$SA4 > 0, 1, 0)
# 3. Extract values from 2005 and 2012 data cause of its dumb format
HH2005$URBAN <- as.numeric(sub("\\).*", "", sub(".*\\(", "", HH2005$URBAN)))
HH2005$ID13 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", HH2005$ID13)))
HH2005$SA4 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", HH2005$SA4)))
HH2005$FU1 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", HH2005$FU1)))
HH2005$WA1 <- as.numeric(sub("\\).*", "", sub(".*\\(", "", HH2005$WA1)))
HH2012$URBAN2011 <- as.numeric(str_sub(HH2012$URBAN2011,-1,-1))
HH2012$ID13 <- as.numeric(str_sub(HH2012$ID13,-1,-1))
HH2012$SA4 <- as.numeric(str_sub(HH2012$SA4, 2, 2))
HH2012$FU1 <- as.numeric(str_sub(HH2012$FU1,-1,-1))
HH2012$WA1A <- as.numeric(str_sub(HH2012$WA1A,-2,-1))
# 4. Aggregate data to village level
VilInd2005 <- aggregate(HH2005[ ,HH2005Controls], by=list(HH2005$id), FUN=mean, na.rm=TRUE)
VilInd2012 <- aggregate(HH2012[ ,HH2012Controls], by=list(HH2012$id), FUN=mean, na.rm=TRUE)
# 5. Rename Variables
VilInd2005 <- rename(VilInd2005, c("Group.1"="id", "URBAN"="urban", "INCOME"="income", "ID13"="caste", "ID16"="yearsLivingHere","SA4"="ownToilet", "FU1"="electricity", "FU1A"="electricityHours", "WA1"="drinkingWaterSource"))
VilInd2012 <- rename(VilInd2012, c("Group.1"="id", "URBAN2011"="urban", "INCOME"="income", "ID13"="caste", "ID15"="yearsLivingHere","SA4"="ownToilet", "FU1"="electricity", "FU1A"="electricityHours", "WA1A"="drinkingWaterSource"))
# 6. Merge with df2005 and df2012
df2005 <- merge(df2005, VilInd2005, by="id")
df2012 <- merge(df2012, VilInd2012, by="id")
#7. Convert probablities to percentages
df2005$electricity <- df2005$electricity*100
df2012$electricity <- df2012$electricity*100
## clean workspace
rm(HH2005Controls, HH2012Controls, VilInd2005, VilInd2012)
# Remove Repeat Data
df2005 <- df2005[!duplicated(df2005$id),]
df2012 <- df2012[!duplicated(df2012$id),]
# 1. Identify variables number of medical facilities.
medicalFacilityVariables2005 = c("id", "vma1", "vma2", "vma3", "vma4", "vma5", "vma7", "vma8", "vma9", "vma10", "vma13")
medicalFacilityRename2005 = c("vma1"="healthSubCenter", "vma2"="primaryHealthCenter", "vma3"="communityHealthCenter", "vma4"="districtHospital", "vma5"="govtMaternityCenter", "vma7"="pvtClinicTrainedDoc", "vma8"="pvtClinicUntrainedDoc", "vma9"="pvtHospital", "vma10"="pvtPharm", "vma13"="otherGovtMedFacility")
medicalFacilityVariables2012 = c("id", "VMA1", "VMA3", "VMA4", "VMA5", "VMA6", "VMA7", "VMA8", "VMA9", "VMA10", "VMA11")
medicalFacilityRename2012 = c("VMA1"="healthSubCenter", "VMA3"="primaryHealthCenter", "VMA4"="communityHealthCenter", "VMA5"="districtHospital", "VMA6"="govtMaternityCenter", "VMA7"="pvtClinicTrainedDoc", "VMA8"="pvtClinicUntrainedDoc", "VMA9"="pvtHospital", "VMA10"="pvtPharm", "VMA11"="otherGovtMedFacility")
# 2. Identify variables for distance to medical facility if not in town.
medicalFacilityDist2005 = c("id", "vmd1", "vmd2", "vmd3", "vmd4", "vmd5", "vmd7", "vmd8", "vmd9", "vmd10", "vmd13")
medicalFacilityDistRename2005 = c("vmd1"="distHealthSubCenter", "vmd2"="distPrimaryHealthCenter", "vmd3"="distCommunityHealthCenter", "vmd4"="distDistrictHospital", "vmd5"="distGovtMaternityCenter", "vmd7"="distPvtClinicTrainedDoc", "vmd8"="distPvtClinicUntrainedDoc", "vmd9"="distPvtHospital", "vmd10"="distPvtPharm", "vmd13"="distOtherGovtMedFacility")
medicalFacilityDist2012 = c("id", "VMD1", "VMD3", "VMD4", "VMD5", "VMD6", "VMD7", "VMD8", "VMD9", "VMD10", "VMD11")
medicalFacilityDistRename2012 = c("VMD1"="distHealthSubCenter", "VMD3"="distPrimaryHealthCenter", "VMD4"="distCommunityHealthCenter", "VMD5"="distDistrictHospital", "VMD6"="distGovtMaternityCenter", "VMD7"="distPvtClinicTrainedDoc", "VMD8"="distPvtClinicUntrainedDoc", "VMD9"="distPvtHospital", "VMD10"="distPvtPharm", "VMD11"="distOtherGovtMedFacility")
# 3. Bind Data to df2005 and df2012 and rename properly
df2005 <- merge(df2005, VIL2005[,medicalFacilityVariables2005], by="id")
df2005 <- rename(df2005, replace = medicalFacilityRename2005)
df2005 <- merge(df2005, VIL2005[,medicalFacilityDist2005], by="id")
df2005 <- rename(df2005, replace = medicalFacilityDistRename2005)
df2012 <- merge(df2012, VIL2012[,medicalFacilityVariables2012], by="id")
df2012 <- rename(df2012, replace = medicalFacilityRename2012)
df2012 <- merge(df2012, VIL2012[,medicalFacilityDist2012], by="id")
df2012 <- rename(df2012, replace = medicalFacilityDistRename2012)
# 4. Remove Repeat Data
df2005 <- df2005[!duplicated(df2005$id),]
df2012 <- df2012[!duplicated(df2012$id),]
# Clear Workspace
rm(VIL2005, VIL2012, medicalFacilityVariables2005, medicalFacilityRename2005, medicalFacilityDist2005, medicalFacilityDistRename2005, medicalFacilityVariables2012, medicalFacilityRename2012, medicalFacilityDist2012, medicalFacilityDistRename2012)
# 0. Drop Cat Variables from cleaned dataframes that will be dummified
dropping <- c("caste", "drinkingWaterSource", "mbTreatmentWho1", "mbTreatmentWhere1", "mbTreatmentWho2", "mbTreatmentWhere2")
df2005[ ,dropping] <- NULL
df2012[ ,dropping] <- NULL
# 1. creat2 dataframe with categorical variables of interest
catVarsHH2005 <- data.frame(HH2005[,c("id", "ID13", "WA1")])
catVarsHH2012 <- data.frame(HH2012[,c("id", "ID13", "WA1A")])
catVarsIND2005 <- data.frame(IND2005[,c("id", "mb19_1", "mb20_1", "mb19_2", "mb20_2")])
catVarsIND2012 <- data.frame(IND2012[,c("id", "MB21A", "MB21B", "MB22A", "MB22B")])
# 2. convert variables to factor type
catVarsHH2005 <- data.frame(lapply(catVarsHH2005, factor))
catVarsHH2012 <- data.frame(lapply(catVarsHH2012, factor))
catVarsIND2005 <- data.frame(lapply(catVarsIND2005, factor))
catVarsIND2012 <- data.frame(lapply(catVarsIND2012, factor))
# 3. Create Dummy Variables
catVarsHH2005 <- dummy.data.frame(catVarsHH2005, names=c("ID13", "WA1"), sep=".")
catVarsHH2012 <- dummy.data.frame(catVarsHH2012, names=c("ID13", "WA1A"), sep=".")
catVarsIND2005 <- dummy.data.frame(catVarsIND2005, names=c("mb19_1", "mb20_1", "mb19_2", "mb20_2"), sep=".")
catVarsIND2012 <- dummy.data.frame(catVarsIND2012, names=c("MB21A", "MB21B", "MB22A", "MB22B"), sep=".")
# 4. Rename Dummy Variables
catVarsHH2005 <- rename(catVarsHH2005, c("ID13.1"="caste.Brahmin", "ID13.2"="caste.OBC", "ID13.3"="caste.SC", "ID13.4"="caste.ST", "ID13.5"="caste.Other", "WA1.1"="drinkingWaterSource.Piped", "WA1.2"="drinkingWaterSource.TubeWell", "WA1.3"="drinkingWaterSource.HandPump", "WA1.4"="drinkingWaterSource.OpenWell", "WA1.5"="drinkingWaterSource.CoveredWell", "WA1.6"="drinkingWaterSource.River", "WA1.7"="drinkingWaterSource.Pond", "WA1.8"="drinkingWaterSource.Truck", "WA1.9"="drinkingWaterSource.RainWater", "WA1.10"="drinkingWaterSource.Bottled", "WA1.11"="drinkingWaterSource.Other", "WA1.NA"="drinkingWaterSource.NA"))
## Fix inconsistencies between 2005 and 2012
### 2012 adds extra categories "NA" (ID13.NA) and "Forward/General" (ID13.2). 2005 lumps these in with "Other" (ID.13.6)
catVarsHH2012$ID13.6 <- rowSums(catVarsHH2012[, c("ID13.NA", "ID13.2","ID13.6")])
catVarsHH2012[, c("ID13.NA","ID13.2")] <- NULL
catVarsHH2012$ID13.6 <- ifelse(catVarsHH2012$ID13.6 > 0, 1, 0)
catVarsHH2012 <- rename(catVarsHH2012, c("ID13.1"="caste.Brahmin", "ID13.3"="caste.OBC", "ID13.4"="caste.SC", "ID13.5"="caste.ST", "ID13.6"="caste.Other", "WA1A.1"="drinkingWaterSource.Piped", "WA1A.2"="drinkingWaterSource.TubeWell", "WA1A.3"="drinkingWaterSource.HandPump", "WA1A.4"="drinkingWaterSource.OpenWell", "WA1A.5"="drinkingWaterSource.CoveredWell", "WA1A.6"="drinkingWaterSource.River", "WA1A.7"="drinkingWaterSource.Pond", "WA1A.8"="drinkingWaterSource.Truck", "WA1A.9"="drinkingWaterSource.RainWater", "WA1A.10"="drinkingWaterSource.Bottled", "WA1A.11"="drinkingWaterSource.Other", "WA1A.NA"="drinkingWaterSource.NA"))
catVarsIND2005 <- rename(catVarsIND2005, c("mb19_1.0"="mbTreatmentWho1.NA", "mb19_1.1"="mbTreatmentWho1.PublicDoc", "mb19_1.2"="mbTreatmentWho1.PublicDocInPvt", "mb19_1.3"="mbTreatmentWho1.PvtDoc", "mb19_1.4"="mbTreatmentWho1.Pharm", "mb19_1.5"="mbTreatmentWho1.OtherOrTraditional", "mb19_2.0"="mbTreatmentWho2.NA", "mb19_2.1"="mbTreatmentWho2.PublicDoc", "mb19_2.2"="mbTreatmentWho2.PublicDocInPvt", "mb19_2.3"="mbTreatmentWho2.PvtDoc", "mb19_2.4"="mbTreatmentWho2.Pharm", "mb19_2.5"="mbTreatmentWho2.OtherOrTraditional", "mb20_1.0"="mbTreatmentWhere1.NA", "mb20_1.1"="mbTreatmentWhere1.SameVillage", "mb20_1.2"="mbTreatmentWhere1.AnotherVillage", "mb20_1.3"="mbTreatmentWhere1.OtherTown", "mb20_1.4"="mbTreatmentWhere1.DistrictTown", "mb20_2.0"="mbTreatmentWhere2.NA", "mb20_2.1"="mbTreatmentWhere2.SameVillage", "mb20_2.2"="mbTreatmentWhere2.AnotherVillage", "mb20_2.3"="mbTreatmentWhere2.OtherTown", "mb20_2.4"="mbTreatmentWhere2.DistrictTown"))
## fix inconsistencies between 2005 and 2012 --> 2012 needs to fit in the scope of the limiting 2005 dataset
### MB21A/MB22A.5,.6,.7 are all "mbTreatmentWho1/2.OtherOrTraditional"
catVarsIND2012$MB21A.5 <- rowSums(catVarsIND2012[, c("MB21A.5", "MB21A.6","MB21A.7")])
catVarsIND2012[, c("MB21A.6","MB21A.7")] <- NULL
catVarsIND2012$MB21A.5 <- ifelse(catVarsIND2012$MB21A.5 > 0, 1, 0)
catVarsIND2012$MB22A.5 <- rowSums(catVarsIND2012[, c("MB22A.5", "MB22A.6","MB22A.7")])
catVarsIND2012[, c("MB22A.6","MB22A.7")] <- NULL
catVarsIND2012$MB22A.5 <- ifelse(catVarsIND2012$MB22A.5 > 0, 1, 0)
### MB21B/MB22B.1 and .2 are both "mbTreatmentWhere1/2.SameVillage"
catVarsIND2012$MB21B.1 <- rowSums(catVarsIND2012[, c("MB21B.1", "MB21B.2")])
catVarsIND2012[, c("MB21B.2")] <- NULL
catVarsIND2012$MB21B.1 <- ifelse(catVarsIND2012$MB21B.1 > 0, 1, 0)
catVarsIND2012$MB22B.1 <- rowSums(catVarsIND2012[, c("MB22B.1", "MB22B.2")])
catVarsIND2012[, c("MB22B.2")] <- NULL
catVarsIND2012$MB22B.1 <- ifelse(catVarsIND2012$MB22B.1 > 0, 1, 0)
### MB21B/MB22B.4,.6,.7 are all "other town"
catVarsIND2012$MB21B.4 <- rowSums(catVarsIND2012[, c("MB21B.4", "MB21B.6", "MB21B.7")])
catVarsIND2012[, c("MB21B.6", "MB21B.7")] <- NULL
catVarsIND2012$MB21B.4 <- ifelse(catVarsIND2012$MB21B.4 > 0, 1, 0)
catVarsIND2012$MB22B.4 <- rowSums(catVarsIND2012[, c("MB22B.4", "MB22B.6", "MB22B.7")])
catVarsIND2012[, c("MB22B.6", "MB22B.7")] <- NULL
catVarsIND2012$MB22B.4 <- ifelse(catVarsIND2012$MB22B.4 > 0, 1, 0)
catVarsIND2012 <- rename(catVarsIND2012, c("MB21A.0"="mbTreatmentWho1.NA", "MB21A.1"="mbTreatmentWho1.PublicDoc", "MB21A.2"="mbTreatmentWho1.PublicDocInPvt", "MB21A.3"="mbTreatmentWho1.PvtDoc", "MB21A.4"="mbTreatmentWho1.Pharm", "MB21A.5"="mbTreatmentWho1.OtherOrTraditional", "MB22A.0"="mbTreatmentWho2.NA", "MB22A.1"="mbTreatmentWho2.PublicDoc", "MB22A.2"="mbTreatmentWho2.PublicDocInPvt", "MB22A.3"="mbTreatmentWho2.PvtDoc", "MB22A.4"="mbTreatmentWho2.Pharm", "MB22A.5"="mbTreatmentWho2.OtherOrTraditional", "MB21B.0"="mbTreatmentWhere1.NA", "MB21B.1"="mbTreatmentWhere1.SameVillage", "MB21B.3"="mbTreatmentWhere1.AnotherVillage", "MB21B.4"="mbTreatmentWhere1.OtherTown", "MB21B.5"="mbTreatmentWhere1.DistrictTown", "MB22B.0"="mbTreatmentWhere2.NA", "MB22B.1"="mbTreatmentWhere2.SameVillage", "MB22B.3"="mbTreatmentWhere2.AnotherVillage", "MB22B.4"="mbTreatmentWhere2.OtherTown", "MB22B.5"="mbTreatmentWhere2.DistrictTown"))
# 5. Aggregate dataframes to village level (by=list("id"))
catVarsHH2005 <- aggregate(catVarsHH2005[,2:dim(catVarsHH2005)[2]], by=list(catVarsHH2005$id), FUN=mean, na.rm=TRUE)
catVarsHH2012 <- aggregate(catVarsHH2012[,2:dim(catVarsHH2012)[2]], by=list(catVarsHH2012$id), FUN=mean, na.rm=TRUE)
catVarsIND2005 <- aggregate(catVarsIND2005[,2:dim(catVarsIND2005)[2]], by=list(catVarsIND2005$id), FUN=mean, na.rm=TRUE)
catVarsIND2012 <- aggregate(catVarsIND2012[,2:dim(catVarsIND2012)[2]], by=list(catVarsIND2012$id), FUN=mean, na.rm=TRUE)
# 6. Merge HH and IND
catVars2005 <- merge(catVarsHH2005, catVarsIND2005, by="Group.1")
catVars2012 <- merge(catVarsHH2012, catVarsIND2012, by="Group.1")
# 7. Rename "Group.1" to "id"
catVars2005 <- rename(catVars2005, c("Group.1"="id"))
catVars2012 <- rename(catVars2012, c("Group.1"="id"))
# 8. Convert variables from probabilities to percentages
catVars2005[,2:dim(catVars2005)[2]] <- catVars2005[,2:dim(catVars2005)[2]]*100
catVars2012[,2:dim(catVars2012)[2]] <- catVars2012[,2:dim(catVars2012)[2]] *100
# 9. Merge Dataframes to main dataset
df2005 <- merge(df2005, catVars2005, by="id")
df2012 <- merge(df2012, catVars2012, by="id")
rm(dropping, HH2005, IND2005, HH2012, IND2012, catVarsIND2012, catVarsIND2005, catVarsHH2005, catVarsHH2012, catVars2005, catVars2012)
df <- rbind(df2005, df2012)
df <- data.frame(lapply(df[,], function(x) replace(x, x %in% -100:-1, NA)))
write.csv(df, file = "ruralHealthAndRoadsOfIndianVillages.csv")
write.csv(df2005, file = "ruralHealthAndRoadsOfIndianVillages2005.csv")
write.csv(df2012, file = "ruralHealthAndRoadsOfIndianVillages2012.csv")
numberOfCommonVillages <- dim(merge(df2005, df2012, by="id"))[1]
numberOfCommonVillages
df <- read.csv(file = "ruralHealthAndRoadsOfIndianVillages.csv", header = TRUE, row.names = 1)
# df2005 <- read.csv(file = "ruralHealthAndRoadsOfIndianVillages2005.csv", header = TRUE, row.names = 1)
# df2012 <- read.csv(file = "ruralHealthAndRoadsOfIndianVillages2012.csv", header = TRUE, row.names = 1)
rm(df, df2005, df2012, numberOfCommonVillages)
df <- read.csv(file = "ruralHealthAndRoadsOfIndianVillages.csv", header = TRUE, row.names = 1)
View(df)
summary(df$mbAnyDisease)
knitr::opts_chunk$set(echo = TRUE)
# plotting
library(ggplot2)
# regressions: robust and panel
library(plm)
# library(foreign)
library(sandwich)
library(lmtest)
library(stargazer)
# data manipulation
library(dplyr)
library(tidyr)
# other
library(pander)
library(knitr)
dim(df2005)[1]
dim(df2005)[1]
knitr::opts_chunk$set(echo = TRUE)
# plotting
library(ggplot2)
# regressions: robust and panel
library(plm)
# library(foreign)
library(sandwich)
library(lmtest)
library(stargazer)
# data manipulation
library(dplyr)
library(tidyr)
# other
library(pander)
library(knitr)
df <- read.csv("ruralHealthAndRoadsOfIndianVillages.csv", header = TRUE, row.names = 1)
df2005 <- read.csv("ruralHealthAndRoadsOfIndianVillages2005.csv", header = TRUE, row.names = 1)
df2012 <- read.csv("ruralHealthAndRoadsOfIndianVillages2012.csv", header = TRUE, row.names = 1)
df <- rename(df, lnDistToPvdRd=lnDistanceToPavedRoad, ImmuniCamps=ImmunizationCampaignsNumber, PctPipedWater = drinkingWaterSource.Piped, Treat.SameVil = mbTreatmentWhere1.SameVillage, Treat.OthrVil=mbTreatmentWhere1.AnotherVillage, Treat.OthrTwn=mbTreatmentWhere1.OtherTown, Treat.DstrctTwn=mbTreatmentWhere1.DistrictTown, primaryHealthCntr=primaryHealthCenter, literate=illiterate, healthSubCntr=healthSubCenter, commHealthCntr=communityHealthCenter, govtMaternityCntr=govtMaternityCenter, pvtClinic=pvtClinicTrainedDoc, distHealthSubCntr=distHealthSubCenter, distCommHealthCntr=distCommunityHealthCenter, distGovtMaternityCntr=distGovtMaternityCenter, distDstrctHosp=distDistrictHospital, distPrmry=distPrimaryHealthCenter, distPvtClinic=distPvtClinicTrainedDoc)
dfNoRoad <- df[(df$roadPaved==0),]
dfNoRoad2005 <- df2005[(df2005$roadPaved==0), ]
dfNoRoad2012 <- df2012[(df2012$roadPaved==0), ]
dfNoRoad[, c('roadPaved', 'yearsWithPavedRoad')] <- NULL
dfNoRoad2005[, c('roadPaved', 'yearsWithPavedRoad')] <- NULL
dfNoRoad2012[, c('roadPaved', 'yearsWithPavedRoad')] <- NULL
dfNoRoad <- dfNoRoad[complete.cases(dfNoRoad[, c('id','year')]),]
dfNoRoad2005 <- dfNoRoad2005[complete.cases(dfNoRoad2005[, c('id','year')]),]
dfNoRoad2012 <- dfNoRoad2012[complete.cases(dfNoRoad2012[, c('id','year')]),]
dfMerge <- merge(df2005, df2012, by="id")
df$year <- as.factor(df$year)
dfNoRoad$year <- as.factor(dfNoRoad$year)
dim(df2005)[1]
stargazer(plm.1, plm.2, plm.3, plm.4, plm.5, plm.6, se=list(r.se.1, r.se.2, r.se.3, r.se.4, r.se.5, r.se.6), title="Road Expansion and Incidence of Any Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE, omit.stat = c("f"))
knitr::opts_chunk$set(echo = TRUE)
# plotting
library(ggplot2)
# regressions: robust and panel
library(plm)
# library(foreign)
library(sandwich)
library(lmtest)
library(stargazer)
# data manipulation
library(dplyr)
library(tidyr)
# other
library(pander)
library(knitr)
df <- read.csv("ruralHealthAndRoadsOfIndianVillages.csv", header = TRUE, row.names = 1)
df2005 <- read.csv("ruralHealthAndRoadsOfIndianVillages2005.csv", header = TRUE, row.names = 1)
df2012 <- read.csv("ruralHealthAndRoadsOfIndianVillages2012.csv", header = TRUE, row.names = 1)
df <- rename(df, lnDistToPvdRd=lnDistanceToPavedRoad, ImmuniCamps=ImmunizationCampaignsNumber, PctPipedWater = drinkingWaterSource.Piped, Treat.SameVil = mbTreatmentWhere1.SameVillage, Treat.OthrVil=mbTreatmentWhere1.AnotherVillage, Treat.OthrTwn=mbTreatmentWhere1.OtherTown, Treat.DstrctTwn=mbTreatmentWhere1.DistrictTown, primaryHealthCntr=primaryHealthCenter, literate=illiterate, healthSubCntr=healthSubCenter, commHealthCntr=communityHealthCenter, govtMaternityCntr=govtMaternityCenter, pvtClinic=pvtClinicTrainedDoc, distHealthSubCntr=distHealthSubCenter, distCommHealthCntr=distCommunityHealthCenter, distGovtMaternityCntr=distGovtMaternityCenter, distDstrctHosp=distDistrictHospital, distPrmry=distPrimaryHealthCenter, distPvtClinic=distPvtClinicTrainedDoc)
dfNoRoad <- df[(df$roadPaved==0),]
dfNoRoad2005 <- df2005[(df2005$roadPaved==0), ]
dfNoRoad2012 <- df2012[(df2012$roadPaved==0), ]
dfNoRoad[, c('roadPaved', 'yearsWithPavedRoad')] <- NULL
dfNoRoad2005[, c('roadPaved', 'yearsWithPavedRoad')] <- NULL
dfNoRoad2012[, c('roadPaved', 'yearsWithPavedRoad')] <- NULL
dfNoRoad <- dfNoRoad[complete.cases(dfNoRoad[, c('id','year')]),]
dfNoRoad2005 <- dfNoRoad2005[complete.cases(dfNoRoad2005[, c('id','year')]),]
dfNoRoad2012 <- dfNoRoad2012[complete.cases(dfNoRoad2012[, c('id','year')]),]
dfMerge <- merge(df2005, df2012, by="id")
df$year <- as.factor(df$year)
dfNoRoad$year <- as.factor(dfNoRoad$year)
pctPvdRd05 <- mean(df2005$roadPaved, na.rm = TRUE)*100
pctPvdRd12 <- mean(df2012$roadPaved, na.rm = TRUE)*100
avgDistRd2005 <- mean(dfNoRoad2005$distanceToPavedRoad, na.rm = TRUE)
avgDistRd2012 <- mean(dfNoRoad2012$distanceToPavedRoad, na.rm = TRUE)
rm(temp_dfRoad2005, temp_dfRoad2012)
avg_mbAnyDisease05 <- mean(df2005$mbAnyDisease, na.rm=TRUE)
avg_mbAnyDisease12 <- mean(df2012$mbAnyDisease, na.rm=TRUE)
avg_mbComDisease05 <- mean(df2005$mbComDisease, na.rm=TRUE)
avg_mbComDisease12 <- mean(df2012$mbComDisease, na.rm=TRUE)
avg_mbNonComDisease05 <- mean(df2005$mbNonComDisease, na.rm=TRUE)
avg_mbNonComDisease12 <- mean(df2012$mbNonComDisease, na.rm=TRUE)
diseaseMeansDF <- data.frame(Year=c('2005', '2012'))
startDis <- which(colnames(df) == 'mbCataract')
endDis <- which(colnames(df) == 'mbOtherLongTerm')
diseaseNames <- colnames(df[,startDis:endDis])
for(disease in diseaseNames){
diseaseMeansDF[,disease] <- c(mean(df2005[,disease]), mean(df2012[,disease]))
}
rm(startDis, endDis, disease)
ggplot(data=dfNoRoad, aes(x=distanceToPavedRoad, y=mbAnyDisease, color=year)) + geom_point(alpha=0.3, na.rm = TRUE) + labs(title = 'Disease Incidence vs Distance to Paved Road for Villages', y='Percent of Villagers with Any Disease', x='Distance To Paved Road (km)') + geom_smooth(method=lm, se=FALSE, na.rm = TRUE)
plm.1 <- plm(data=df, mbAnyDisease ~ roadPaved, index = c("id", "year"), model="within")
plm.2 <- plm(data=df, mbAnyDisease ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.3 <- plm(data=df, mbAnyDisease ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.1 <- sqrt(diag(vcovHC(plm.1, type = "HC1")))
r.se.2 <- sqrt(diag(vcovHC(plm.2, type = "HC1")))
r.se.3 <- sqrt(diag(vcovHC(plm.3, type = "HC1")))
plm.4 <- plm(data=dfNoRoad, mbAnyDisease ~ lnDistToPvdRd, index = c("id", "year"), model="within")
plm.5 <- plm(data=dfNoRoad, mbAnyDisease ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), modsel="within")
plm.6 <- plm(data=dfNoRoad, mbAnyDisease ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.4 <- sqrt(diag(vcovHC(plm.4, type = "HC1")))
r.se.5 <- sqrt(diag(vcovHC(plm.5, type = "HC1")))
r.se.6 <- sqrt(diag(vcovHC(plm.6, type = "HC1")))
stargazer(plm.1, plm.2, plm.3, se=list(r.se.1, r.se.2, r.se.3), title="Road Paved and Incidence of Any Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
stargazer(plm.4, plm.5, plm.6, se=list(r.se.4, r.se.5, r.se.6),title="Road Distance and Incidence of Any Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
plm.7 <- plm(data=df, mbComDisease ~ roadPaved, index = c("id", "year"), model="within")
plm.8 <- plm(data=df, mbComDisease ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.9 <- plm(data=df, mbComDisease ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.7 <- sqrt(diag(vcovHC(plm.7, type = "HC1")))
r.se.8 <- sqrt(diag(vcovHC(plm.8, type = "HC1")))
r.se.9 <- sqrt(diag(vcovHC(plm.9, type = "HC1")))
plm.10 <- plm(data=dfNoRoad, mbComDisease ~ lnDistToPvdRd, index = c("id", "year"), model="within")
plm.11 <- plm(data=dfNoRoad, mbComDisease ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.12 <- plm(data=dfNoRoad, mbComDisease ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.10 <- sqrt(diag(vcovHC(plm.10, type = "HC1")))
r.se.11 <- sqrt(diag(vcovHC(plm.11, type = "HC1")))
r.se.12 <- sqrt(diag(vcovHC(plm.12, type = "HC1")))
stargazer(plm.7, plm.8, plm.9, se=list(r.se.7, r.se.8, r.se.9), title="Road Paved and Incidence of Communicable Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
stargazer(plm.10, plm.11, plm.12, se=list(r.se.10, r.se.11, r.se.12),title="Road Distance and Incidence of Communicable Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
plm.13 <- plm(data=df, mbNonComDisease ~ roadPaved, index = c("id", "year"), model="within")
plm.14 <- plm(data=df, mbNonComDisease ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.15 <- plm(data=df, mbNonComDisease ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.13 <- sqrt(diag(vcovHC(plm.13, type = "HC1")))
r.se.14 <- sqrt(diag(vcovHC(plm.14, type = "HC1")))
r.se.15 <- sqrt(diag(vcovHC(plm.15, type = "HC1")))
plm.16 <- plm(data=dfNoRoad, mbNonComDisease ~ lnDistToPvdRd, index = c("id", "year"), model="within")
plm.17 <- plm(data=dfNoRoad, mbNonComDisease ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.18 <- plm(data=dfNoRoad, mbNonComDisease ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.16 <- sqrt(diag(vcovHC(plm.16, type = "HC1")))
r.se.17 <- sqrt(diag(vcovHC(plm.17, type = "HC1")))
r.se.18 <- sqrt(diag(vcovHC(plm.18, type = "HC1")))
stargazer(plm.13, plm.14, plm.15, se=list(r.se.13, r.se.14, r.se.15), title="Road Paved and Incidence of Non-Communicable Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
stargazer(plm.16, plm.17, plm.18, se=list(r.se.16, r.se.17, r.se.18),title="Road Distance and Incidence of Non-Communicable Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
plm.19 <- plm(data=df, mbSTDorAIDS ~ roadPaved, index = c("id", "year"), model="within")
plm.20 <- plm(data=df, mbSTDorAIDS ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.21 <- plm(data=df, mbSTDorAIDS ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.19 <- sqrt(diag(vcovHC(plm.19, type = "HC1")))
r.se.20 <- sqrt(diag(vcovHC(plm.20, type = "HC1")))
r.se.21 <- sqrt(diag(vcovHC(plm.21, type = "HC1")))
plm.22 <- plm(data=dfNoRoad, mbSTDorAIDS ~ lnDistToPvdRd, index = c("id", "year"), model="within")
plm.23 <- plm(data=dfNoRoad, mbSTDorAIDS ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.24 <- plm(data=dfNoRoad, mbSTDorAIDS ~ lnDistToPvdRd + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.22 <- sqrt(diag(vcovHC(plm.22, type = "HC1")))
r.se.23 <- sqrt(diag(vcovHC(plm.23, type = "HC1")))
r.se.24 <- sqrt(diag(vcovHC(plm.24, type = "HC1")))
stargazer(plm.19, plm.20, plm.21, se=list(r.se.19, r.se.20, r.se.21), title="Road Paved and Incidence of STD/AIDS: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
stargazer(plm.22, plm.23, plm.24, se=list(r.se.22, r.se.23, r.se.24),title="Road Distance and Incidence of STD/AIDS: OLS with Village and Time-Fixed Effects", type="text", header=FALSE)
mbStart <- which(colnames(df) == "mbCataract")
mbEnd <- which(colnames(df) == "mbSTDorAIDS")
diseases <- colnames(df[,mbStart:mbEnd])
diseases <- append(diseases, c('mbOtherLongTerm'))
plm.mb <- list()
plm.mb.hc1 <- list()
for (disease in diseases) {
plm.mb[disease] <- list(plm(df[,disease] ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, data=df, index = c("id", "year"), model = "within"))
# generate robust standard errors
plm.mb.hc1[disease] <- list(coeftest(plm.mb[[disease]], function(x) vcovHC(x, type="HC1")))
}
stargazer(plm.mb[diseases], se=plm.mb.hc1[diseases]["Std. Error"], type = "text", column.labels=diseases, title="Road Paved and Incidence of All Diseases: OLS with Village and Time-Fixed Effects", header=FALSE)
plm.daysInc.1 <- plm(data=df, mbDaysIncapacitated ~ roadPaved, index = c("id", "year"), model="within")
plm.daysInc.2 <- plm(data=df, mbDaysIncapacitated ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.daysInc.3 <- plm(data=df, mbDaysIncapacitated ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.daysInc.1 <- sqrt(diag(vcovHC(plm.daysInc.1, type = "HC1")))
r.se.daysInc.2 <- sqrt(diag(vcovHC(plm.daysInc.2, type = "HC1")))
r.se.daysInc.3 <- sqrt(diag(vcovHC(plm.daysInc.3, type = "HC1")))
plm.daysInc.4 <- plm(data=df, mbDaysIncapacitated ~ roadPaved, index = c("id", "year"), model="within")
plm.daysInc.5 <- plm(data=df, mbDaysIncapacitated ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor, index = c("id", "year"), model="within")
plm.daysInc.6 <- plm(data=df, mbDaysIncapacitated ~ roadPaved + income + literate + smokeTobacco + ownToilet + electricity + seenDoctor + ImmuniCamps + PctPipedWater + healthSubCntr + primaryHealthCntr + commHealthCntr + pvtClinic + pvtHospital, index = c("id", "year"), model="within")
r.se.daysInc.4 <- sqrt(diag(vcovHC(plm.daysInc.4, type = "HC1")))
r.se.daysInc.5 <- sqrt(diag(vcovHC(plm.daysInc.5, type = "HC1")))
r.se.daysInc.6 <- sqrt(diag(vcovHC(plm.daysInc.6, type = "HC1")))
stargazer(plm.daysInc.1, plm.daysInc.2, plm.daysInc.3, plm.daysInc.4, plm.daysInc.5, plm.daysInc.6, se=list(r.se.daysInc.1, r.se.daysInc.2, r.se.daysInc.3, r.se.daysInc.4, r.se.daysInc.5, r.se.daysInc.6), type="text", header=FALSE, title="Road and Days Incapacitated Due To Illness: OLS with Village and Time-fixed Effects", omit = c("f"))
diseaseNames <- append(diseaseNames, c('mbAnyDisease', 'mbComDisease', 'mbNonComDisease'))
df_disease2005 <- df2005[, diseaseNames]
df_disease2012 <- df2012[, diseaseNames]
stargazer(df_disease2005, title="2005 Summary Statistics: Disease Incidence (Pct of village) 2005", header = FALSE)
stargazer(df_disease2012, title="2012 Summary Statistics: Disease Incidence (Pct of village) 2012", header = FALSE)
# kable(diseaseMeansDF[,1:7], caption="Average Percent of Villagers in each Village with Disease:")
#
# kable(diseaseMeansDF[,c(1,8:14)], caption="Average Percent of Villagers in each Village with Disease:")
stargazer(plm.1, plm.2, plm.3, plm.4, plm.5, plm.6, se=list(r.se.1, r.se.2, r.se.3, r.se.4, r.se.5, r.se.6), title="Road Expansion and Incidence of Any Disease: OLS with Village and Time-Fixed Effects", type="text", header=FALSE, omit.stat = c("f"))
